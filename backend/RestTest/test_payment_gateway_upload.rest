### Payment Gateway Upload Tests

### 1. Upload Excel File with Payment Details
# This uses the generated sample_payments.xlsx file
# Make sure you've run: python generate_sample_payments.py first
POST http://127.0.0.1:8000/api/payment-gateway/upload/
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="vsat.paid030226-050226.xlsx"
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

< ./vsat.paid030226-050226.xlsx
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### 2. Get All Payment Records (Paginated - Page 1, Limit 50)
GET http://127.0.0.1:8000/api/payment-gateway/data/?page=1&limit=50

###

### 3. Get Payment Records - Page 2
GET http://127.0.0.1:8000/api/payment-gateway/data/?page=2&limit=20

###

### 4. Filter by Transaction ID
GET http://127.0.0.1:8000/api/payment-gateway/data/?txnid=TXN123456789

###

### 5. Filter by Email
GET http://127.0.0.1:8000/api/payment-gateway/data/?email=student@example.com

###

### 6. Filter by Phone Number
GET http://127.0.0.1:8000/api/payment-gateway/data/?phone=9989901515

###

### 7. Filter by Status (Success)
GET http://127.0.0.1:8000/api/payment-gateway/data/?status=success

###

### 8. Filter by Status (Failed)
GET http://127.0.0.1:8000/api/payment-gateway/data/?status=failed

###

### 9. Filter by Status (Pending)
GET http://127.0.0.1:8000/api/payment-gateway/data/?status=pending

###

### 10. Multiple Filters - Email + Status
GET http://127.0.0.1:8000/api/payment-gateway/data/?email=student@example.com&status=success

###

### 11. Multiple Filters - Phone + Status with Pagination
GET http://127.0.0.1:8000/api/payment-gateway/data/?phone=9876543210&status=success&page=1&limit=10

###

### 12. Search by Transaction ID with Pagination
GET http://127.0.0.1:8000/api/payment-gateway/data/?txnid=TXN987654321&page=1&limit=5

###

### 13. Get Large Dataset - 100 records per page
GET http://127.0.0.1:8000/api/payment-gateway/data/?page=1&limit=100

###

### 14. Delete Specific Payment Record by ID
# Note: Replace with actual MongoDB ObjectId from your database
DELETE http://127.0.0.1:8000/api/payment-gateway/data/?id=507f1f77bcf86cd799439011

###

### 15. Delete All Payment Records (USE WITH CAUTION!)
# This will delete all payment records from the database
# Uncomment the line below to test
# DELETE http://127.0.0.1:8000/api/payment-gateway/data/?confirm_delete_all=YES_DELETE_ALL

###

### 16. Test Invalid File Upload (No File)
POST http://127.0.0.1:8000/api/payment-gateway/upload/
Content-Type: application/json

{
  "error": "No file provided"
}

###

### 17. Test Upload with Wrong File Type
POST http://127.0.0.1:8000/api/payment-gateway/upload/
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="payments.csv"
Content-Type: text/csv

< ./payments.csv
------WebKitFormBoundary7MA4YWxkTrZu0gW--

###

### 18. Get Payment Records - Default (First 50 records)
GET http://127.0.0.1:8000/api/payment-gateway/data/

###

### 19. Filter by Email with Case Sensitivity
GET http://127.0.0.1:8000/api/payment-gateway/data/?email=Student@Example.com

###

### 20. Complex Query - Multiple Filters
GET http://127.0.0.1:8000/api/payment-gateway/data/?email=test@example.com&status=success&page=1&limit=25

###

### Expected Excel File Columns:
# status, txnid, addedon, id, amount, productinfo, firstname, email, phone, ip,
# merchant_id, bank_name, bank_ref_no, cardtype, mode, error_code, errorDescription,
# error_message, pgmid, pg_response, issuing_bank, payment_source, name_on_card,
# card_number, address_line1, address_line2, state, country, zipcode,
# shipping_firstname, shipping_lastname, shipping_address1, shipping_address2,
# shipping_city, shipping_state, shipping_country, shipping_zipcode, shipping_phone,
# transaction_fee, discount, additional_charges, amount(inr), udf1, udf2, udf3,
# udf4, udf5, field0, field1, field2, field3, field4, field5, field6, field7,
# field8, device_info, merchant_subvention_amount, utr, recon_ref_number,
# settlement_amount, settlement_date, service_fees, tsp_charges, convenience_fee,
# cgst, sgst, igst, token_bin, last_four_digits, arn, auth_code,
# conversion_status, conversion_date, conversion_remarks, mer_service_fee,
# currency_type, network_type, unmapped_status, category, sub_category

###
